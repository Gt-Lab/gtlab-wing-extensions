#开发记录

## 基本玩法
1. 新建sb文件，打开sb界面
2. 从现有scene模板中拖动一个scene到canvas中
3. 从控件库中拖动控件到scene中
4. 拖动按钮到另一个scene，确定页面跳转逻辑
5. 输出（可以选择是否使用eui）


## eui应用限制
在webview类型插件中使用eui是可以的，但是收到种种限制。
1. Button 这种类型的控件都是需要资源的，涉及到资源，使用都很麻烦。目前能想到的两种解决方案：（1）将游戏工程中所有资源拷贝到插件目录中使用。这样使用资源的各个函数就能依靠相对路径自动找到资源。（2）通过nodejs读出所有资源文件，按照 http://edn.egret.com/cn/docs/page/504 中“嵌入EXML到代码”的方式来加载资源。
2. egret整个页面就是一个canvas，如果要实现sb中的操作，就要把每个页面都绘制在一个canvas中，或者每个页面绘制的canvas导出图片数据，再在sb中使用。这可能涉及到去理解wing和eui的源代码，不知道能否完成。
3. 已经下载的几个游戏都没有使用eui，我也希望我的sb可以直接导出那样的工程。

## 关于eui的思考
写到上面的第三条，思绪就停不下来了。eui到底带来了什么？我到底要不要使用eui？值得思考。
首先，如果从头开发一款游戏，我设想的一个流程是：
1. 美术资源准备。完毕，包括背景图、元素的提取，雪碧图制作等。
2. 搭建框架。确定每个scene的命名，源文件的目录结构，确定scene跳转的基本逻辑。
3. 针对每个scene，按照设计套用美术资源。
4. 针对主场景，逻辑可能比较多，专注编写。

在步骤2中，可以先用eui搭建出基础的交互。然后在3中，修改对应图片就可以了。
4中肯定也设计很多资源的使用，或者3、4对调，先写完基本玩法，然后套图。

我的sb就是要快速构架，确定跳转逻辑。是否能加入方便地套用美术资源的功能？


## 使用方法
1. 进入sb界面，拖两个scene进来
2. 设置是否需要用eui，双击scene，如果不是，进入ts代码；如果使用eui，可以选择进入eui编辑器或者编辑ts代码。两种方式都会自动生成对应的文件。
2. 转场：sb中，选择动作发起scene中的一个元素，ctrl拖到目标scene中，自动创建链接。可以修改起始的id、连接名、转场方式。
3. 本scene功能（例如当前页面，点击一个按钮，弹出一个框）：选择元素，ctrl拖动到本scene，可以设置函数名称。
4. sb中点击预览，可以点击各个页面中的按钮看效果，转场可以通过连接线上一个移动的光带来展现，也可以像正常运行一样，在一个窗口中预览。


## 技术方案
sb的canvas中的各个scene是一个个的iframe，每一个scene的对应文件都生成自己的index.html和相关js，引用进来，也就是说每一页都具有独立显示的能力。通过iframe和父窗口之间的通信，来实现转场的连接等功能。



